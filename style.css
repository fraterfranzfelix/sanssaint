/* =============================================================================
   STYLESHEET INDEX
   1. Variables & Setup
   2. Layout & Scrolling
   3. Hero Section
      3a. Parallax Layers
      3b. Particle Animations
      3c. Center Container
      3d. Buttons
      3e. Hero Footer
      3f. Weapons Layers
   4. Section 2: Split Panels
      4a. Panel Configuration
      4b. Background Images
      4c. Gradient Overlays
      4d. Rule of Thirds Grid
      4e. Typography
      4f. Center Image (Angel)
   5. Responsive Breakpoints
============================================================================= */


/* =============================================================================
   1. VARIABLES & SETUP
============================================================================= */

:root {
    --viola-violet: #785adc;
    --malve-magenta: #fa8ca0;
    --blanc-leger: #eaeaea;
    --noir-leger: #151515;
    --font-primary: 'EB Garamond', serif;
}

@font-face {
    font-family: 'EB Garamond';
    src: url('assets/eb_garamond/EBGaramond-VariableFont_wght.ttf') format('truetype');
    font-weight: 400 800;
    font-style: normal;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-primary);
    color: var(--noir-leger);
    background-color: var(--blanc-leger);
    overflow: hidden;
}


/* =============================================================================
   2. LAYOUT & SCROLLING
============================================================================= */

/* Full-viewport scroll container with animated scrolling */
.scroll-container {
    height: 100vh;
    width: 100vw;
    overflow-y: scroll;
    scroll-behavior: smooth;
}

.section {
    position: relative;
    height: 100vh;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}


/* =============================================================================
   3. HERO SECTION
============================================================================= */

.hero-section {
    position: relative;
    overflow: hidden;
}


/* --- 3a. Parallax Layers -------------------------------------------------- */

/* All moving layers share these base rules.
   Sized at 110% to prevent edge gaps during movement. */
.parallax-layer {
    position: absolute;
    top: -5%;
    left: -5%;
    width: 110%;
    height: 110%;
    pointer-events: none;
}

/* Background painting — lowest z-index */
.bg-layer {
    z-index: 1;
    background-image: -webkit-image-set(
        url('assets/01_caspar_david_friedrich_abtei_im_eichwald.avif') 1x,
        url('assets/01_caspar_david_friedrich_abtei_im_eichwald.jpeg') 1x
    );
    background-image: image-set(
        url('assets/01_caspar_david_friedrich_abtei_im_eichwald.avif') type('image/avif'),
        url('assets/01_caspar_david_friedrich_abtei_im_eichwald.jpeg') type('image/jpeg')
    );
    background-size: cover;
    background-position: center;
}

/* Ensures hero content sits between the back and front particle layers */
.relative-content {
    position: relative;
    z-index: 10;
}


/* --- 3b. Particle Animations ---------------------------------------------- */

/* Smaller, blurred dots — drift slowly */
.particles-back {
    z-index: 5;
    background-image: radial-gradient(var(--blanc-leger) 1px, transparent 2px),
                      radial-gradient(var(--blanc-leger) 1px, transparent 2px);
    background-size: 200px 200px, 300px 300px;
    background-position: 0 0, 40px 60px;
    opacity: 1;
    filter: blur(1px);
    animation: wind-back 33s linear infinite;
}

/* Larger, sharper dots — drift faster */
.particles-front {
    z-index: 20;
    background-image: radial-gradient(var(--blanc-leger) 3px, transparent 4px),
                      radial-gradient(var(--blanc-leger) 2px, transparent 3px);
    background-size: 500px 500px, 400px 400px;
    background-position: 0 0, 60px 90px;
    opacity: 1;
    filter: blur(0.5px);
    animation: wind-front 12s linear infinite;
}

/* Gentle drift with a slight rightward curve */
@keyframes wind-back {
    0%   { background-position: 0 0, 40px 60px; }
    50%  { background-position: 20px 500px, 60px 560px; }
    100% { background-position: 50px 1000px, 90px 1060px; }
}

/* Stronger gust with variable speed mid-flight */
@keyframes wind-front {
    0%   { background-position: 0 0, 60px 90px; }
    25%  { background-position: 50px 250px, 110px 340px; }
    75%  { background-position: 120px 750px, 180px 840px; }
    100% { background-position: 200px 1000px, 260px 1090px; }
}


/* --- 3c. Center Container ------------------------------------------------- */

/* Width glides from 33.33% on wide screens to 50% at 960px,
   eliminating the discrete 960px breakpoint entirely. */
.center-container {
    width: clamp(33.33%, calc(33.33% + (1400px - 100vw) * 0.037886), 50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 2rem;
    transition: width 0.4s ease;
}

.hero-logo {
    width: 100%;
    margin-bottom: 2rem;
    height: auto;
}


/* --- 3d. Buttons ---------------------------------------------------------- */

.button-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    width: 100%;
}

.btn {
    flex: 1 0 150px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.25rem 2rem;
    font-family: var(--font-primary);
    font-size: 1rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    text-decoration: none;
    cursor: pointer;
    border: none;
    border-radius: 1rem;
    outline: none;
    transition: all 0.3s ease;
}

.btn:hover {
    font-weight: 600;
    letter-spacing: 0.025em;
}

/* Light neumorphic button */
.btn-white {
    background-color: var(--blanc-leger);
    color: var(--noir-leger);
    box-shadow:
        -4px -4px 10px rgba(255,255,255, 0.8),
         4px  4px 10px rgba(0,0,0, 0.1);
}

.btn-white:hover {
    transform: translateY(-2px);
    box-shadow:
        -6px -6px 14px rgba(255,255,255, 0.9),
         6px  6px 14px rgba(0,0,0, 0.15);
}

/* Dark neumorphic button */
.btn-black {
    background-color: var(--noir-leger);
    color: var(--blanc-leger);
    box-shadow:
        -4px -4px 10px rgba(255,255,255, 0.05),
         4px  4px 10px rgba(0,0,0, 0.3);
}

.btn-black:hover {
    transform: translateY(-2px);
    box-shadow:
        -6px -6px 14px rgba(255,255,255, 0.08),
         6px  6px 14px rgba(0,0,0, 0.4);
}


/* --- 3e. Hero Footer ------------------------------------------------------ */

.hero-footer {
    position: absolute;
    bottom: 2rem;
    left: 0;
    width: 100%;
    text-align: center;
    font-family: var(--font-primary);
    font-size: 0.67rem;
    font-weight: 500;
    color: var(--noir-leger);
    z-index: 10;
}

.hero-footer p {
    margin: 0;
}


/* --- 3f. Weapons Layers --------------------------------------------------- */

/* Primary strategy — position absorbs viewport changes, not size:
     Width is locked at 700px (= exactly 50vw at the 1400px design baseline).
     On wider screens it scales up proportionally as 50vw so the swords always
     meet at the center with zero gap and zero overlap.
     As the viewport narrows below 1400px, the image stays 700px wide; only the
     outer edges slide off-screen (up to −12.5%) while the inner edges naturally
     begin to overlap (up to ~30%). No resizing happens at all in this range.

   Secondary strategy — only below 900px, where primary is exhausted:
     Height and width start stepping down. Both properties are transitioned
     so the reduction feels like a breath rather than a jump. */
.weapons-layer {
    top: auto;
    bottom: 0;
    height: 110%;
    width: max(50vw, 700px);
    z-index: 7;
    transition: width 0.4s ease, height 0.4s ease;
}

.weapons-layer picture,
.weapons-layer img {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: contain;
}

/* Outer edges glide off-screen from 0 (at 1400px) to −12.5% (at 900px).
   The formula resolves to 0 on wide screens and is clamped at −12.5% below 900px. */
.weapons-left {
    left: clamp(-12.5%, calc((100vw - 1400px) * 0.225), 0%);
}

.weapons-left img {
    object-position: left bottom;
}

.weapons-right {
    left: auto;
    right: clamp(-12.5%, calc((100vw - 1400px) * 0.225), 0%);
}

.weapons-right img {
    object-position: right bottom;
}


/* =============================================================================
   4. SECTION 2: SPLIT PANELS
============================================================================= */

.split-section {
    display: flex;
    flex-direction: row;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    position: relative;
}

.panel {
    position: relative;
    height: 100%;
    overflow: hidden;
}


/* --- 4a. Panel Configuration ---------------------------------------------- */

/* Left panel extends 20px beyond 50% so it tucks cleanly behind the right panel */
.panel-left {
    flex: 0 0 calc(50% + 20px);
    max-width: calc(50% + 20px);
    margin-right: -20px;
    z-index: 1;
}

/* Right panel sits on top with a rounded top-left corner */
.panel-right {
    flex: 0 0 50%;
    max-width: 50%;
    z-index: 2;
    border-top-left-radius: 20px;
    -webkit-mask-image: -webkit-radial-gradient(white, black);
    mask-image: radial-gradient(white, black);
    overflow: hidden;
}


/* --- 4b. Background Images ------------------------------------------------ */

/* Both layers are oversized to allow parallax movement without edge gaps */
.bg-layer-creation {
    width: 115% !important;
    height: 115% !important;
    left: -7.5% !important;
    top: -7.5% !important;
    background-image: -webkit-image-set(url('assets/03_gustave_dore_creation.jpeg') 1x);
    background-image: image-set(
        url('assets/03_gustave_dore_creation.avif') type('image/avif'),
        url('assets/03_gustave_dore_creation.jpeg') type('image/jpeg')
    );
    background-size: cover;
    background-position: center;
}

.bg-layer-eden {
    width: 115% !important;
    height: 115% !important;
    left: -7.5% !important;
    top: -7.5% !important;
    background-image: -webkit-image-set(url('assets/04_gustave_dore_jacobs_dream.jpeg') 1x);
    background-image: image-set(
        url('assets/04_gustave_dore_jacobs_dream.avif') type('image/avif'),
        url('assets/04_gustave_dore_jacobs_dream.jpeg') type('image/jpeg')
    );
    background-size: cover;
    background-position: center;
}


/* --- 4c. Gradient Overlays ------------------------------------------------ */

/* Fade edges of the left panel into the page background color */
.gradient-overlay {
    position: absolute;
    left: 0;
    width: 100%;
    height: 2rem;
    z-index: 5;
    pointer-events: none;
}

.gradient-top {
    top: 0;
    background: linear-gradient(to bottom, var(--blanc-leger), transparent);
}

.gradient-bottom {
    bottom: 0;
    background: linear-gradient(to top, var(--blanc-leger), transparent);
}


/* --- 4d. Rule of Thirds Grid ---------------------------------------------- */

/* Three equal columns keep text anchored to the middle third of each panel.
   Column ratio is transitioned so grid tightening at breakpoints feels gradual. */
.thirds-grid {
    position: relative;
    z-index: 10;
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-rows: 1fr auto 1fr;
    align-items: center;
    transition: grid-template-columns 0.4s ease;
}

.grid-center-content {
    grid-column: 2;
    grid-row: 2;
    justify-self: center;
    width: 100%;
    white-space: nowrap;
    font-family: var(--font-primary);
    font-size: 1rem;
    font-weight: 500;
    line-height: 1.5;
}


/* --- 4e. Typography ------------------------------------------------------- */

/* Alignment utilities */
.text-left  { text-align: left; }
.align-right { text-align: right; }

/* Color utilities */
.text-noir  { color: var(--noir-leger); }
.text-blanc { color: var(--blanc-leger); }

/* Branded highlights */
.highlight-viola {
    color: var(--viola-violet);
    font-weight: 800;
    font-variant: small-caps;
}

.highlight-malve {
    color: var(--malve-magenta);
    font-weight: 800;
    font-variant: small-caps;
}

.citation {
    font-size: 0.67rem;
    display: inline-block;
    opacity: 0.9;
}


/* --- 4f. Center Image (Angel) --------------------------------------------- */

/* Absolutely centered within the split section, hovering above both panels.
   JS parallax composes its translate on top of the base -50%/-50% centering.
   Height is transitioned so breakpoint resizes feel smooth. Transform is
   intentionally excluded from the transition to keep JS parallax responsive. */
.center-image-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    height: 85.71%;
    z-index: 15;
    pointer-events: none;
    transition: height 0.4s ease;
}

.center-angel-img {
    height: 100%;
    width: auto;
    object-fit: contain;
    /* Neumorphic-style shadow: soft light from top-left, soft dark from bottom-right */
    filter:
        drop-shadow(-4px -4px 12px rgba(255, 255, 255, 0.6))
        drop-shadow( 4px  4px 12px rgba(0, 0, 0, 0.12));
}


/* =============================================================================
   5. RESPONSIVE BREAKPOINTS

   clamp() handles the continuous fluid range for weapons bleed and several
   widths, so hard breakpoints are kept to a minimum. What remains:
     — Two grid-ratio steps for the split panel text (1300px, 1000px)
     — One secondary-strategy step for weapons height (900px)
     — One full layout flip for mobile (768px)
   Every discrete property change is transitioned so threshold crossings
   feel like gentle animations rather than snaps.
============================================================================= */

/* (≤ 1300px) Grid tightens — side padding narrows from 33% to 25% */
@media (max-width: 1300px) {
    .thirds-grid          { grid-template-columns: 1fr 2fr 1fr; }
    .center-image-wrapper { height: 70%; }
}

/* (≤ 1000px) Grid tightens further — side padding narrows to ~16.6% */
@media (max-width: 1000px) {
    .thirds-grid          { grid-template-columns: 1fr 4fr 1fr; }
    .center-image-wrapper { height: 58%; }
}

/* (≤ 900px) Secondary strategy begins — primary bleed/overlap is exhausted.
   Height steps down; width will follow only if absolutely necessary. */
@media (max-width: 900px) {
    .weapons-layer { height: 95%; }
}

/* (≤ 768px) Full mobile stack — the one intentional hard layout change */
@media (max-width: 768px) {
    .center-container { width: 66.66%; }

    .split-section { flex-direction: column; }

    .panel {
        width: 100%;
        height: 50vh;
        flex: auto;
        max-width: 100%;
        margin: 0;
        border-radius: 0;
    }

    /* Full panel width restores the spacious 1/3 grid margins */
    .thirds-grid { grid-template-columns: 1fr 1fr 1fr; }

    /* Angel shifts left so 2/3 is visible; height bumped up slightly for presence */
    .center-image-wrapper {
        left: 0;
        height: 65%;
        transform: translate(-33.33%, -50%);
    }

    /* Weapons yield to percentage sizing on narrow mobile viewports */
    .weapons-layer { width: 66.67%; height: 80%; }
}